#!/usr/bin/env bash

# Cat may be replaced by `<(...)`, but is clearer here.
# shellcheck disable=SC2002
cat "$XDG_STATE_HOME/zsh/history" |
    sed ': merge;/\\$/{N;s/\\\n//;b merge};s/^[^;]*;//' |
    cut --delimiter=" " --fields=1 |
    sort |
    uniq --count |
    sort --numeric-sort --reverse |
    head --lines=15
