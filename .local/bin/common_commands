#!/usr/bin/env bash

# Cat may be replaced by `<(...)`, but is clearer here.
# shellcheck disable=SC2002
cat "$XDG_STATE_HOME/zsh/history" |
    sed ': merge;/\\$/{N;s/\\\n//;b merge};s/^[^;]*;//' |
    cut -d " " -f 1 |
    sort |
    uniq -c |
    sort -n |
    tail -n 15 |
    tac
