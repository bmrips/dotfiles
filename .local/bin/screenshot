#!/usr/bin/env bash

# Takes a screenshot using scrot.  You can specify which area to take a
# screenshot of. Possible options are: focus, select, multidisp.  By default, a
# shot of the entire screen is taken.

dir="$HOME/Pictures/Screenshots"

for arg in "$@"; do
    case "$arg" in
    -c | --clipboard)
        clipboard=1
        ;;
    -t | --temporary)
        dir=/tmp/screenshots
        ;;
    -*)
        echo "Error: unknown option: $arg" >&2
        exit 1
        ;;
    select)
        mode="--select"
        ;;
    window)
        mode="--window=$(xdotool getactivewindow)"
        ;;
    *)
        echo "Error: unknown argument: $arg" >&2
        exit 2
        ;;
    esac
done

mkdir --parents "$dir"
file="$dir/$(date +%Y%m%d-%H%M%S).png"

maim "$mode" "$file" --hidecursor

if [[ -n $clipboard ]]; then
    xclip -selection clipboard -in -target image/png "$file"
fi
